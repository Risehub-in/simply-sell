query FetchOrders {
  orders {
    created_at
    delivery_fee
    id
    order_status
    payment_amount
    payment_response_id
    order_items {
      item_quantity
      price
      variant {
        mrp
        price
        product {
          product_title
        }
      }
    }
    address {
      address_type
      area_locality
      flat_floor_bldg
      location_address
    }
  }
}


mutation CreateOrder(
  $id: bigint!
  $user_id: uuid!
  $delivery_fee: numeric!
  $address_id: bigint!
  $payment_response_id: String!
  $payment_amount: numeric!
  $order_items: [order_items_insert_input!]!
) {
  insert_orders(
    objects: {
      id: $id
      user_id: $user_id
      delivery_fee: $delivery_fee
      address_id: $address_id
      payment_response_id: $payment_response_id
      payment_amount: $payment_amount
    }
  ) {
    affected_rows
  }
  insert_order_items(objects: $order_items) {
    affected_rows
  }
  delete_cart_items(where: { user_id: { _eq: $user_id } }) {
    affected_rows
  }
}
