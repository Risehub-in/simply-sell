
subscription getCartSubscription {
  cart_items(order_by: {created_at: desc}) {
    cart_quantity
    id
    user_id
    variant {
      id
      mrp
      price
      uom_value
      uom {
        uom_name
      }
      product {
        id
        product_title
        featured_image
      }
    }
  }
}


mutation updateCartItemQuantity(
  $id: bigint!,
  $cart_quantity: smallint!
  ) {
    update_cart_items(where: {id: {_eq: $id}},
    _set: {cart_quantity: $cart_quantity}) {
      affected_rows
    }
  }

  mutation ClearCart($user_id: uuid!) {
  delete_cart_items(where: {user_id: {_eq: $user_id}}) {
    affected_rows
  }
}

mutation DeleteSingleCartItem($id: bigint!) {
  delete_cart_items_by_pk(id: $id) {
    id
  }
}



mutation AddToCart(
  $user_id: uuid!
  $variant_id: bigint!
  $cart_quantity: smallint,
) {
  insert_cart_items(
    objects: {
      user_id: $user_id
      variant_id: $variant_id
      cart_quantity: $cart_quantity
    }
  ) {
    affected_rows
  }
}
